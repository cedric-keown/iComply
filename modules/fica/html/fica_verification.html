<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FICA Verification - iComply</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Phoenix Theme CSS -->
    <link href="https://prium.github.io/phoenix/v1.23.0/assets/css/phoenix.min.css" rel="stylesheet">
    <link href="https://prium.github.io/phoenix/v1.23.0/assets/css/theme.min.css" rel="stylesheet">
    <!-- SweetAlert2 -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Custom Styles -->
    <link href="../../../css/main.css" rel="stylesheet">
    <link href="../css/fica-styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation Tabs -->
    <div class="fica-tabs-container">
        <ul class="nav nav-tabs fica-tabs" id="ficaTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab">
                    <i class="fas fa-chart-pie me-2"></i>FICA Dashboard
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="verify-tab" data-bs-toggle="tab" data-bs-target="#verify" type="button" role="tab">
                    <i class="fas fa-user-plus me-2"></i>Verify New Client
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="queue-tab" data-bs-toggle="tab" data-bs-target="#queue" type="button" role="tab">
                    <i class="fas fa-list me-2"></i>Verification Queue
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="risk-tab" data-bs-toggle="tab" data-bs-target="#risk" type="button" role="tab">
                    <i class="fas fa-exclamation-triangle me-2"></i>Risk Assessment
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="screening-tab" data-bs-toggle="tab" data-bs-target="#screening" type="button" role="tab">
                    <i class="fas fa-search me-2"></i>Screening & Monitoring
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">
                    <i class="fas fa-sync-alt me-2"></i>Reviews & Updates
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="reports-tab" data-bs-toggle="tab" data-bs-target="#reports" type="button" role="tab">
                    <i class="fas fa-file-alt me-2"></i>Reports
                </button>
            </li>
        </ul>
    </div>

    <!-- Tab Content -->
    <div class="tab-content fica-content" id="ficaTabContent">
        <!-- 1. FICA DASHBOARD -->
        <div class="tab-pane fade show active" id="dashboard" role="tabpanel">
            <div class="container-fluid py-4">
                <!-- Compliance Metrics -->
                <div class="row mb-4">
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="stat-card">
                            <div class="text-center">
                                <div class="donut-chart-container mb-3">
                                    <canvas id="verificationChart" width="150" height="150"></canvas>
                                    <div class="donut-center">
                                        <div class="donut-value">235</div>
                                        <div class="donut-label">/ 248</div>
                                    </div>
                                </div>
                                <div class="stat-label">Clients Verified</div>
                                <div class="stat-sublabel">
                                    <span class="badge bg-success">✅ Good Compliance</span>
                                </div>
                                <small class="text-muted d-block mt-2">13 pending verification</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="stat-card">
                            <div class="stat-icon text-warning">
                                <i class="fas fa-exclamation-triangle fa-3x"></i>
                            </div>
                            <div class="stat-value text-warning">8</div>
                            <div class="stat-label">High-Risk Clients</div>
                            <div class="stat-sublabel">Requiring EDD</div>
                            <a href="#" class="btn btn-sm btn-link mt-2" onclick="switchFicaTab('risk-tab')">View Details</a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="stat-card">
                            <div class="stat-icon text-info">
                                <i class="fas fa-clock fa-3x"></i>
                            </div>
                            <div class="stat-value text-info">13</div>
                            <div class="stat-label">Pending Verifications</div>
                            <div class="stat-sublabel">Awaiting documentation</div>
                            <a href="#" class="btn btn-sm btn-link mt-2" onclick="switchFicaTab('queue-tab')">Review Queue</a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="stat-card">
                            <div class="stat-icon text-danger">
                                <i class="fas fa-calendar-times fa-3x"></i>
                            </div>
                            <div class="stat-value text-danger">5</div>
                            <div class="stat-label">Overdue Reviews</div>
                            <div class="stat-sublabel">Require immediate attention</div>
                            <a href="#" class="btn btn-sm btn-link mt-2" onclick="switchFicaTab('reviews-tab')">View Overdue</a>
                        </div>
                    </div>
                </div>

                <!-- Verification Breakdown -->
                <div class="row mb-4">
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">By Risk Category</h5>
                            </div>
                            <div class="card-body">
                                <div class="risk-bar-item mb-3">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Low Risk (SDD)</strong></span>
                                        <span>180 (73%)</span>
                                    </div>
                                    <div class="progress" style="height: 25px;">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 73%"></div>
                                    </div>
                                </div>
                                <div class="risk-bar-item mb-3">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Standard Risk (CDD)</strong></span>
                                        <span>48 (19%)</span>
                                    </div>
                                    <div class="progress" style="height: 25px;">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 19%"></div>
                                    </div>
                                </div>
                                <div class="risk-bar-item mb-3">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>High Risk (EDD)</strong></span>
                                        <span>8 (3%)</span>
                                    </div>
                                    <div class="progress" style="height: 25px;">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 3%"></div>
                                    </div>
                                </div>
                                <div class="risk-bar-item">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Not Yet Classified</strong></span>
                                        <span>12 (5%)</span>
                                    </div>
                                    <div class="progress" style="height: 25px;">
                                        <div class="progress-bar bg-secondary" role="progressbar" style="width: 5%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">By Status</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="statusChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">By Document Status</h5>
                            </div>
                            <div class="card-body">
                                <div class="document-status-item mb-3">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-check-circle text-success fa-2x me-3"></i>
                                        <div>
                                            <div class="h5 mb-0">225</div>
                                            <small class="text-muted">All Documents</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="document-status-item mb-3">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-exclamation-circle text-warning fa-2x me-3"></i>
                                        <div>
                                            <div class="h5 mb-0">18</div>
                                            <small class="text-muted">Missing Documents</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="document-status-item">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-times-circle text-danger fa-2x me-3"></i>
                                        <div>
                                            <div class="h5 mb-0">5</div>
                                            <small class="text-muted">Expired Documents</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="row mb-4">
                    <div class="col-md-8 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Recent Activity</h5>
                            </div>
                            <div class="card-body">
                                <div class="activity-list">
                                    <div class="activity-item">
                                        <div class="activity-icon bg-success">
                                            <i class="fas fa-check"></i>
                                        </div>
                                        <div class="activity-content">
                                            <h6 class="mb-1">Client Thabo Mokoena verified</h6>
                                            <p class="mb-1 small text-muted">Standard CDD completed</p>
                                            <small class="text-muted">Sarah Naidoo • 2 hours ago</small>
                                        </div>
                                        <button class="btn btn-sm btn-outline-primary">View Client</button>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon bg-warning">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div>
                                        <div class="activity-content">
                                            <h6 class="mb-1">PEP screening match found</h6>
                                            <p class="mb-1 small text-muted">Client Lerato Dlamini - Requires EDD</p>
                                            <small class="text-muted">System • 5 hours ago</small>
                                        </div>
                                        <button class="btn btn-sm btn-outline-primary">Review Match</button>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon bg-info">
                                            <i class="fas fa-file"></i>
                                        </div>
                                        <div class="activity-content">
                                            <h6 class="mb-1">Documents uploaded</h6>
                                            <p class="mb-1 small text-muted">Client Johan van Zyl - ID & Proof of address</p>
                                            <small class="text-muted">Pieter Vermeulen • 1 day ago</small>
                                        </div>
                                        <button class="btn btn-sm btn-outline-primary">Verify Documents</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Quick Actions</h5>
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <button class="btn btn-primary" onclick="switchFicaTab('verify-tab')">
                                        <i class="fas fa-user-plus me-2"></i>Verify New Client
                                    </button>
                                    <button class="btn btn-outline-primary">
                                        <i class="fas fa-upload me-2"></i>Bulk Upload
                                    </button>
                                    <button class="btn btn-outline-primary">
                                        <i class="fas fa-search me-2"></i>Run Screenings
                                    </button>
                                    <a href="#" class="btn btn-link text-start" onclick="switchFicaTab('queue-tab')">
                                        View All Pending
                                    </a>
                                    <a href="#" class="btn btn-link text-start" onclick="switchFicaTab('reports-tab')">
                                        Generate Compliance Report
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Alerts & Warnings -->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Alerts & Warnings</h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-danger d-flex align-items-center">
                                    <i class="fas fa-exclamation-circle fa-2x me-3"></i>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">5 Reviews Overdue</h6>
                                        <p class="mb-1">The following clients have overdue annual reviews</p>
                                        <small>M. van der Merwe (30 days), P. Botha (15 days), etc.</small>
                                    </div>
                                    <button class="btn btn-danger" onclick="switchFicaTab('reviews-tab')">Review Now</button>
                                </div>
                                <div class="alert alert-warning d-flex align-items-center">
                                    <i class="fas fa-exclamation-triangle fa-2x me-3"></i>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">Expiring Documents</h6>
                                        <p class="mb-0">8 clients have documents expiring in next 30 days</p>
                                    </div>
                                    <button class="btn btn-warning">View Expiring</button>
                                </div>
                                <div class="alert alert-info d-flex align-items-center">
                                    <i class="fas fa-info-circle fa-2x me-3"></i>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">New Screening Rules</h6>
                                        <p class="mb-0">Updated PEP list available - run bulk screening recommended</p>
                                    </div>
                                    <div>
                                        <button class="btn btn-info me-2">Run Screening</button>
                                        <button class="btn-close" aria-label="Close"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. VERIFY NEW CLIENT TAB -->
        <div class="tab-pane fade" id="verify" role="tabpanel">
            <div class="container-fluid py-4">
                <!-- Client Type Selection -->
                <div id="clientTypeSelection" class="text-center">
                    <h2 class="mb-4">Select Client Type</h2>
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="client-type-card active" data-type="individual">
                                <i class="fas fa-user fa-4x text-primary mb-3"></i>
                                <h4>Individual Client</h4>
                                <p class="text-muted">Natural person - South African or foreign national</p>
                                <button class="btn btn-primary" onclick="startVerification('individual')">Select</button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="client-type-card" data-type="corporate">
                                <i class="fas fa-building fa-4x text-info mb-3"></i>
                                <h4>Corporate Client</h4>
                                <p class="text-muted">Company, close corporation, trust, or partnership</p>
                                <button class="btn btn-outline-primary" onclick="startVerification('corporate')">Select</button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="client-type-card" data-type="foreign">
                                <i class="fas fa-globe fa-4x text-success mb-3"></i>
                                <h4>Foreign Individual</h4>
                                <p class="text-muted">Individual client without SA ID</p>
                                <button class="btn btn-outline-primary" onclick="startVerification('foreign')">Select</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Verification Wizard -->
                <div id="verificationWizard" style="display: none;">
                    <!-- Progress Indicator -->
                    <div class="wizard-progress mb-4">
                        <div class="progress-steps">
                            <div class="step active" data-step="1">
                                <div class="step-number">1</div>
                                <div class="step-label">Basic Details</div>
                            </div>
                            <div class="step" data-step="2">
                                <div class="step-number">2</div>
                                <div class="step-label">Identity</div>
                            </div>
                            <div class="step" data-step="3">
                                <div class="step-number">3</div>
                                <div class="step-label">Proof of Residence</div>
                            </div>
                            <div class="step" data-step="4">
                                <div class="step-number">4</div>
                                <div class="step-label">Risk Assessment</div>
                            </div>
                            <div class="step" data-step="5">
                                <div class="step-number">5</div>
                                <div class="step-label">Screening</div>
                            </div>
                            <div class="step" data-step="6">
                                <div class="step-number">6</div>
                                <div class="step-label">Review & Submit</div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 1: Basic Details -->
                    <div class="wizard-step" id="step1" data-step="1">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 1: Basic Details</h5>
                            </div>
                            <div class="card-body">
                                <form id="basicDetailsForm">
                                    <h6 class="mb-3">Personal Information</h6>
                                    <div class="row">
                                        <div class="col-md-2 mb-3">
                                            <label class="form-label">Title *</label>
                                            <select class="form-select" required>
                                                <option value="">Select...</option>
                                                <option>Mr</option>
                                                <option>Mrs</option>
                                                <option>Ms</option>
                                                <option>Dr</option>
                                                <option>Prof</option>
                                                <option>Other</option>
                                            </select>
                                        </div>
                                        <div class="col-md-5 mb-3">
                                            <label class="form-label">First Name *</label>
                                            <input type="text" class="form-control" required>
                                        </div>
                                        <div class="col-md-5 mb-3">
                                            <label class="form-label">Surname *</label>
                                            <input type="text" class="form-control" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Middle Name(s)</label>
                                            <input type="text" class="form-control">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Preferred Name</label>
                                            <input type="text" class="form-control">
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Date of Birth *</label>
                                            <input type="date" class="form-control" id="dob" required>
                                            <small class="text-muted" id="ageDisplay"></small>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Gender *</label>
                                            <select class="form-select" required>
                                                <option value="">Select...</option>
                                                <option>Male</option>
                                                <option>Female</option>
                                                <option>Other</option>
                                                <option>Prefer not to say</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Nationality *</label>
                                            <select class="form-select" required>
                                                <option>South African</option>
                                                <option>Other...</option>
                                            </select>
                                        </div>
                                    </div>

                                    <h6 class="mb-3 mt-4">Contact Information</h6>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Mobile Number *</label>
                                            <div class="input-group">
                                                <span class="input-group-text">+27</span>
                                                <input type="tel" class="form-control" placeholder="82 123 4567" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Alternative Number</label>
                                            <input type="tel" class="form-control">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Email Address *</label>
                                            <input type="email" class="form-control" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Alternative Email</label>
                                            <input type="email" class="form-control">
                                        </div>
                                    </div>

                                    <h6 class="mb-3 mt-4">Residential Address</h6>
                                    <div class="row">
                                        <div class="col-12 mb-3">
                                            <label class="form-label">Street Address Line 1 *</label>
                                            <input type="text" class="form-control" required>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <label class="form-label">Street Address Line 2</label>
                                            <input type="text" class="form-control">
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Suburb *</label>
                                            <input type="text" class="form-control" required>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">City *</label>
                                            <input type="text" class="form-control" required>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Province *</label>
                                            <select class="form-select" required>
                                                <option value="">Select...</option>
                                                <option>Western Cape</option>
                                                <option>Gauteng</option>
                                                <option>KwaZulu-Natal</option>
                                                <option>Eastern Cape</option>
                                                <option>Limpopo</option>
                                                <option>Mpumalanga</option>
                                                <option>Northern Cape</option>
                                                <option>North West</option>
                                                <option>Free State</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Postal Code *</label>
                                            <input type="text" class="form-control" maxlength="4" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Country *</label>
                                            <select class="form-select" required>
                                                <option>South Africa</option>
                                                <option>Other...</option>
                                            </select>
                                        </div>
                                    </div>

                                    <h6 class="mb-3 mt-4">Additional Information</h6>
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Marital Status</label>
                                            <select class="form-select">
                                                <option value="">Select...</option>
                                                <option>Single</option>
                                                <option>Married</option>
                                                <option>Divorced</option>
                                                <option>Widowed</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Number of Dependants</label>
                                            <input type="number" class="form-control" min="0">
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Occupation *</label>
                                            <input type="text" class="form-control" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Employer Name</label>
                                            <input type="text" class="form-control">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Tax Number *</label>
                                            <input type="text" class="form-control" maxlength="10" required>
                                            <small class="text-muted">10 digits</small>
                                        </div>
                                    </div>

                                    <div class="d-flex gap-2 mt-4">
                                        <button type="button" class="btn btn-primary" onclick="nextStep(2)">Next: Identity Verification</button>
                                        <button type="button" class="btn btn-outline-secondary">Save as Draft</button>
                                        <button type="button" class="btn btn-link" onclick="cancelVerification()">Cancel</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Identity Verification -->
                    <div class="wizard-step" id="step2" data-step="2" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 2: Identity Verification</h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info">
                                    <strong>Instructions:</strong> Upload a clear, legible copy of the client's South African ID document (green bar-coded ID or smart ID card). Both sides must be visible.
                                </div>

                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">ID Front Side *</label>
                                        <div class="upload-zone" id="idFrontZone">
                                            <div class="text-center py-4">
                                                <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                                <p class="mb-2"><strong>Drag & drop ID front here</strong></p>
                                                <button class="btn btn-sm btn-primary">Browse</button>
                                                <p class="mt-2 small text-muted">PDF, JPG, PNG - Max 5MB</p>
                                            </div>
                                        </div>
                                        <input type="file" class="d-none" id="idFrontFile" accept=".pdf,.jpg,.jpeg,.png">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">ID Back Side *</label>
                                        <div class="upload-zone" id="idBackZone">
                                            <div class="text-center py-4">
                                                <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                                <p class="mb-2"><strong>Drag & drop ID back here</strong></p>
                                                <button class="btn btn-sm btn-primary">Browse</button>
                                                <p class="mt-2 small text-muted">PDF, JPG, PNG - Max 5MB</p>
                                            </div>
                                        </div>
                                        <input type="file" class="d-none" id="idBackFile" accept=".pdf,.jpg,.jpeg,.png">
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <label class="form-label">ID Number *</label>
                                    <input type="text" class="form-control" id="idNumber" maxlength="13" placeholder="8506155800083" required>
                                    <div class="mt-2" id="idValidation">
                                        <small class="text-muted">Enter 13-digit ID number</small>
                                    </div>
                                </div>

                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="check1">
                                    <label class="form-check-label" for="check1">ID document is clear and legible</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="check2">
                                    <label class="form-check-label" for="check2">All corners of ID visible</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="check3">
                                    <label class="form-check-label" for="check3">No tampering or alterations visible</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="check4">
                                    <label class="form-check-label" for="check4">ID is valid (not expired)</label>
                                </div>

                                <div class="d-flex gap-2 mt-4">
                                    <button type="button" class="btn btn-primary" onclick="nextStep(3)">Next: Proof of Residence</button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="previousStep(1)">Back</button>
                                    <button type="button" class="btn btn-outline-secondary">Save as Draft</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Proof of Residence -->
                    <div class="wizard-step" id="step3" data-step="3" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 3: Proof of Residence</h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info">
                                    <strong>Requirements:</strong> Upload a proof of residence document not older than 3 months. Accepted documents: Utility bill, bank statement, municipal account, lease agreement.
                                </div>

                                <div class="mb-4">
                                    <label class="form-label">Document Type *</label>
                                    <select class="form-select" required>
                                        <option value="">Select...</option>
                                        <option>Utility Bill (Electricity/Water/Gas)</option>
                                        <option>Bank Statement</option>
                                        <option>Municipal Account</option>
                                        <option>Lease/Rental Agreement</option>
                                        <option>Mortgage Statement</option>
                                        <option>Other (specify)</option>
                                    </select>
                                </div>

                                <div class="mb-4">
                                    <label class="form-label">Document Date *</label>
                                    <input type="date" class="form-control" id="porDate" required>
                                    <small class="text-muted" id="porDateValidation"></small>
                                </div>

                                <div class="mb-4">
                                    <label class="form-label">Upload Document *</label>
                                    <div class="upload-zone" id="porZone">
                                        <div class="text-center py-4">
                                            <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                            <p class="mb-2"><strong>Drag & drop proof of residence here</strong></p>
                                            <button class="btn btn-sm btn-primary">Browse</button>
                                            <p class="mt-2 small text-muted">PDF, JPG, PNG - Max 5MB</p>
                                        </div>
                                    </div>
                                    <input type="file" class="d-none" id="porFile" accept=".pdf,.jpg,.jpeg,.png">
                                </div>

                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="porCheck1">
                                    <label class="form-check-label" for="porCheck1">Document is dated within 3 months</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="porCheck2">
                                    <label class="form-check-label" for="porCheck2">Document clearly shows client name</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="porCheck3">
                                    <label class="form-check-label" for="porCheck3">Document clearly shows address</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="porCheck4">
                                    <label class="form-check-label" for="porCheck4">Address matches residential address</label>
                                </div>

                                <div class="d-flex gap-2 mt-4">
                                    <button type="button" class="btn btn-primary" onclick="nextStep(4)">Next: Risk Assessment</button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="previousStep(2)">Back</button>
                                    <button type="button" class="btn btn-outline-secondary">Save as Draft</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Risk Assessment -->
                    <div class="wizard-step" id="step4" data-step="4" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 4: Risk Assessment</h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info mb-4">
                                    Complete the risk assessment to determine the appropriate due diligence level (SDD, CDD, or EDD).
                                </div>

                                <div class="mb-4">
                                    <label class="form-label"><strong>1. What is the client's source of income? *</strong></label>
                                    <select class="form-select" required>
                                        <option value="">Select...</option>
                                        <option>Employment/Salary</option>
                                        <option>Business/Self-employed</option>
                                        <option>Investment Income</option>
                                        <option>Inheritance</option>
                                        <option>Other (specify)</option>
                                    </select>
                                </div>

                                <div class="mb-4">
                                    <label class="form-label"><strong>2. What is the expected monthly transaction value? *</strong></label>
                                    <select class="form-select" required>
                                        <option value="">Select...</option>
                                        <option>< R50,000 (Low)</option>
                                        <option>R50,000 - R200,000 (Medium)</option>
                                        <option>> R200,000 (High)</option>
                                    </select>
                                </div>

                                <div class="mb-4">
                                    <label class="form-label"><strong>3. Is the client a Politically Exposed Person (PEP)? *</strong></label>
                                    <select class="form-select" required>
                                        <option value="">Select...</option>
                                        <option>No</option>
                                        <option>Domestic PEP (SA government official)</option>
                                        <option>Foreign PEP (foreign government official)</option>
                                        <option>International Organization PEP</option>
                                        <option>Family member of PEP</option>
                                        <option>Close associate of PEP</option>
                                    </select>
                                </div>

                                <div class="card bg-light mb-4">
                                    <div class="card-body">
                                        <h6>Risk Classification Result</h6>
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="badge bg-warning fs-6 me-2">MEDIUM</span>
                                            <span>Customer Due Diligence (CDD) Required</span>
                                        </div>
                                        <small class="text-muted">Risk Score: 45/100</small>
                                    </div>
                                </div>

                                <div class="d-flex gap-2 mt-4">
                                    <button type="button" class="btn btn-primary" onclick="nextStep(5)">Next: Screening</button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="previousStep(3)">Back</button>
                                    <button type="button" class="btn btn-outline-secondary">Save as Draft</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 5: Screening -->
                    <div class="wizard-step" id="step5" data-step="5" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 5: Screening</h5>
                            </div>
                            <div class="card-body">
                                <div class="text-center mb-4" id="screeningProgress">
                                    <div class="spinner-border text-primary mb-3" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <p>Screening in Progress...</p>
                                    <p class="text-muted">Estimated time: 30-60 seconds</p>
                                </div>

                                <div id="screeningResults" style="display: none;">
                                    <div class="card bg-success text-white mb-3">
                                        <div class="card-body">
                                            <h6><i class="fas fa-check-circle me-2"></i>PEP Screening</h6>
                                            <p class="mb-0">Status: ✅ No Match Found</p>
                                            <small>Database: World-Check, Refinitiv, Dow Jones | Last Updated: 15/12/2024 10:30</small>
                                        </div>
                                    </div>
                                    <div class="card bg-success text-white mb-3">
                                        <div class="card-body">
                                            <h6><i class="fas fa-check-circle me-2"></i>Sanctions Screening</h6>
                                            <p class="mb-0">Status: ✅ Clear</p>
                                            <small>Checked: OFAC, UN, EU, UK HMT, AU | Last Updated: 15/12/2024 10:30</small>
                                        </div>
                                    </div>
                                    <div class="card bg-success text-white mb-3">
                                        <div class="card-body">
                                            <h6><i class="fas fa-check-circle me-2"></i>Adverse Media Screening</h6>
                                            <p class="mb-0">Status: ✅ No Negative Findings</p>
                                            <small>Sources: Global news databases | Last Screened: 15/12/2024 10:30</small>
                                        </div>
                                    </div>
                                    <div class="alert alert-success">
                                        <strong>Overall Result:</strong> ✅ CLEAR - All Checks Passed: 3/3
                                    </div>
                                </div>

                                <div class="d-flex gap-2 mt-4">
                                    <button type="button" class="btn btn-primary" onclick="nextStep(6)" id="screeningNextBtn" style="display: none;">Next: Review & Submit</button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="previousStep(4)">Back</button>
                                    <button type="button" class="btn btn-outline-secondary">Save as Draft</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 6: Review & Submit -->
                    <div class="wizard-step" id="step6" data-step="6" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 6: Review & Submit</h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-success mb-4">
                                    <h6>Verification Status: READY TO SUBMIT</h6>
                                    <p class="mb-0">All required information has been captured and verified.</p>
                                </div>

                                <div class="accordion mb-4" id="reviewAccordion">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#reviewPersonal">
                                                Personal Details
                                            </button>
                                        </h2>
                                        <div id="reviewPersonal" class="accordion-collapse collapse show" data-bs-parent="#reviewAccordion">
                                            <div class="accordion-body">
                                                <p><strong>Name:</strong> Thabo Johannes Mokoena</p>
                                                <p><strong>ID Number:</strong> 8506155800083</p>
                                                <p><strong>Date of Birth:</strong> 15/06/1985 (39 years old)</p>
                                                <p><strong>Contact:</strong> +27 82 123 4567 | thabo.mokoena@email.com</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#reviewDocs">
                                                Documents Uploaded
                                            </button>
                                        </h2>
                                        <div id="reviewDocs" class="accordion-collapse collapse" data-bs-parent="#reviewAccordion">
                                            <div class="accordion-body">
                                                <p>✅ ID Document (Front & Back) - Verified</p>
                                                <p>✅ Proof of Residence (Utility Bill dated 10/12/2024) - Verified</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#reviewRisk">
                                                Risk Assessment
                                            </button>
                                        </h2>
                                        <div id="reviewRisk" class="accordion-collapse collapse" data-bs-parent="#reviewAccordion">
                                            <div class="accordion-body">
                                                <p><strong>Risk Level:</strong> <span class="badge bg-warning">MEDIUM</span></p>
                                                <p><strong>Due Diligence:</strong> Customer Due Diligence (CDD)</p>
                                                <p><strong>Risk Score:</strong> 45/100</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#reviewScreening">
                                                Screening Results
                                            </button>
                                        </h2>
                                        <div id="reviewScreening" class="accordion-collapse collapse" data-bs-parent="#reviewAccordion">
                                            <div class="accordion-body">
                                                <p>✅ PEP Screening: Clear</p>
                                                <p>✅ Sanctions Screening: Clear</p>
                                                <p>✅ Adverse Media: Clear</p>
                                                <p><strong>Overall:</strong> ✅ PASSED</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="card bg-light mb-4">
                                    <div class="card-body">
                                        <h6>Compliance Checklist</h6>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="finalCheck1" checked disabled>
                                            <label class="form-check-label" for="finalCheck1">Personal details captured</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="finalCheck2" checked disabled>
                                            <label class="form-check-label" for="finalCheck2">ID document verified</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="finalCheck3" checked disabled>
                                            <label class="form-check-label" for="finalCheck3">Proof of residence verified</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="finalCheck4" checked disabled>
                                            <label class="form-check-label" for="finalCheck4">Risk assessment completed</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="finalCheck5" checked disabled>
                                            <label class="form-check-label" for="finalCheck5">Screening passed</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="d-flex gap-2 mt-4">
                                    <button type="button" class="btn btn-primary btn-lg" onclick="completeVerification()">Complete Verification</button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="previousStep(5)">Back to Edit</button>
                                    <button type="button" class="btn btn-outline-secondary">Save as Draft</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. VERIFICATION QUEUE TAB -->
        <div class="tab-pane fade" id="queue" role="tabpanel">
            <div class="container-fluid py-4">
                <h2 class="mb-4">Verification Queue</h2>
                
                <!-- Queue Stats -->
                <div class="row mb-4">
                    <div class="col-md-3 mb-4">
                        <div class="stat-card">
                            <div class="stat-value">13</div>
                            <div class="stat-label">Total in Queue</div>
                            <div class="stat-sublabel">Pending verification</div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="stat-card">
                            <div class="stat-value text-warning">8</div>
                            <div class="stat-label">Awaiting Documents</div>
                            <div class="stat-sublabel">Client action required</div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="stat-card">
                            <div class="stat-value text-info">5</div>
                            <div class="stat-label">Ready for Review</div>
                            <div class="stat-sublabel">Complete documentation</div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="stat-card">
                            <div class="stat-value">2.5</div>
                            <div class="stat-label">Average Time</div>
                            <div class="stat-sublabel">Days</div>
                        </div>
                    </div>
                </div>

                <!-- Filters -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label">Status</label>
                                <select class="form-select">
                                    <option>All</option>
                                    <option>Awaiting Documents</option>
                                    <option>Ready for Review</option>
                                    <option>In Progress</option>
                                    <option>On Hold</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Priority</label>
                                <select class="form-select">
                                    <option>All</option>
                                    <option>High</option>
                                    <option>Medium</option>
                                    <option>Low</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Risk Level</label>
                                <select class="form-select">
                                    <option>All</option>
                                    <option>High Risk (EDD)</option>
                                    <option>Medium Risk (CDD)</option>
                                    <option>Low Risk (SDD)</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Search</label>
                                <input type="text" class="form-control" placeholder="Client name, ID, reference...">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Queue Table -->
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Priority</th>
                                        <th>Client Name</th>
                                        <th>ID/Ref Number</th>
                                        <th>Status</th>
                                        <th>Risk Level</th>
                                        <th>Progress</th>
                                        <th>Submitted</th>
                                        <th>Assigned To</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge bg-danger">🔴 High</span></td>
                                        <td>Johan van Zyl</td>
                                        <td>7803125678901</td>
                                        <td><span class="badge bg-info">📋 Ready for Review</span></td>
                                        <td>Medium Risk (CDD)</td>
                                        <td>
                                            <div class="progress" style="height: 8px;">
                                                <div class="progress-bar bg-success" style="width: 100%"></div>
                                            </div>
                                        </td>
                                        <td>3 days ago</td>
                                        <td>Sarah Naidoo</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary">Review Now</button>
                                            <button class="btn btn-sm btn-outline-secondary">View</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge bg-warning">🟠 Medium</span></td>
                                        <td>Lerato Dlamini</td>
                                        <td>9205086789012</td>
                                        <td><span class="badge bg-warning">⏳ Awaiting Documents</span></td>
                                        <td>High Risk (EDD)</td>
                                        <td>
                                            <div class="progress" style="height: 8px;">
                                                <div class="progress-bar bg-warning" style="width: 60%"></div>
                                            </div>
                                        </td>
                                        <td>5 days ago</td>
                                        <td>Unassigned</td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary">Request Docs</button>
                                            <button class="btn btn-sm btn-outline-secondary">View</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. RISK ASSESSMENT TAB -->
        <div class="tab-pane fade" id="risk" role="tabpanel">
            <div class="container-fluid py-4">
                <h2 class="mb-4">Risk Assessment</h2>
                <p>Risk assessment dashboard and tools</p>
            </div>
        </div>

        <!-- 5. SCREENING & MONITORING TAB -->
        <div class="tab-pane fade" id="screening" role="tabpanel">
            <div class="container-fluid py-4">
                <h2 class="mb-4">Screening & Monitoring</h2>
                <p>Screening dashboard and monitoring tools</p>
            </div>
        </div>

        <!-- 6. REVIEWS & UPDATES TAB -->
        <div class="tab-pane fade" id="reviews" role="tabpanel">
            <div class="container-fluid py-4">
                <h2 class="mb-4">Reviews & Updates</h2>
                <p>Review schedule and update workflow</p>
            </div>
        </div>

        <!-- 7. REPORTS TAB -->
        <div class="tab-pane fade" id="reports" role="tabpanel">
            <div class="container-fluid py-4">
                <h2 class="mb-4">FICA Reports</h2>
                
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-chart-bar fa-3x text-primary mb-3"></i>
                                <h5>FICA Compliance Summary</h5>
                                <p class="text-muted">Overall FICA compliance status report</p>
                                <button class="btn btn-primary">Generate</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-user-check fa-3x text-success mb-3"></i>
                                <h5>Client Verification Report</h5>
                                <p class="text-muted">Detailed report for individual client</p>
                                <button class="btn btn-success">Generate</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
                                <h5>High-Risk Clients Report</h5>
                                <p class="text-muted">Report on all high-risk clients requiring EDD</p>
                                <button class="btn btn-warning">Generate</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://prium.github.io/phoenix/v1.23.0/assets/js/phoenix.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../js/fica-dashboard.js"></script>
    <script src="../js/verification-wizard.js"></script>
    <script src="../js/id-validator.js"></script>
    <script src="../js/verification-queue.js"></script>
</body>
</html>

