<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Executive Dashboard - iComply</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Phoenix Theme CSS -->
    <link href="https://prium.github.io/phoenix/v1.23.0/assets/css/phoenix.min.css" rel="stylesheet">
    <link href="https://prium.github.io/phoenix/v1.23.0/assets/css/theme.min.css" rel="stylesheet">
    <!-- SweetAlert2 -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Custom Styles -->
    <link href="../../../css/main.css" rel="stylesheet">
    <link href="../css/dashboard.css" rel="stylesheet">
    <link href="../css/health-score.css" rel="stylesheet">
    <link href="../css/cards.css" rel="stylesheet">
    <link href="../css/widgets.css" rel="stylesheet">
    <link href="../css/timeline.css" rel="stylesheet">
</head>
<body>
    <!-- 1. HEADER WITH FSP LICENSE STATUS -->
    <div class="dashboard-header">
        <div class="container-fluid">
            <div class="row align-items-center py-3">
                <div class="col-md-4">
                    <div class="d-flex align-items-center">
                        <div class="company-logo me-3">
                            <i class="fas fa-building fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h5 class="mb-0" id="fsp-name">Loading...</h5>
                            <small class="text-muted" id="fsp-number">Loading...</small>
                            <span class="badge bg-success ms-2">âœ“ ACTIVE</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 text-center">
                    <h4 class="mb-0">Executive Dashboard</h4>
                    <small class="text-muted">Compliance Overview & Team Performance</small>
                    <div class="mt-1">
                        <small class="text-muted">Last Updated: <span id="last-updated">15/12/2024 14:30</span></small>
                    </div>
                </div>
                <div class="col-md-4 text-end">
                    <div class="d-flex align-items-center justify-content-end gap-2">
                        <div class="user-info me-3">
                            <small class="text-muted" id="current-user-name">Loading...</small><br>
                            <small class="text-muted" id="current-user-role">Loading...</small>
                        </div>
                        <button class="btn btn-sm btn-outline-secondary position-relative">
                            <i class="fas fa-bell"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">12</span>
                        </button>
                        <button class="btn btn-sm btn-outline-secondary">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button class="btn btn-sm btn-primary" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#" onclick="exportDashboard('pdf')">Export to PDF</a></li>
                                <li><a class="dropdown-item" href="#" onclick="exportDashboard('excel')">Export to Excel</a></li>
                                <li><a class="dropdown-item" href="#" onclick="exportDashboard('email')">Email to Board</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" onclick="scheduleEmail()">Schedule Weekly Email</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- FSP License Information Card -->
        <div class="container-fluid">
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h5 class="mb-0">FSP License Status: <span class="badge bg-light text-dark" id="license-status">ACTIVE âœ“</span></h5>
                            <small id="license-valid-until">Loading license information...</small>
                        </div>
                        <button class="btn btn-sm btn-light" type="button" data-bs-toggle="collapse" data-bs-target="#licenseDetails">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                </div>
                <div class="collapse show" id="licenseDetails">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>License Details</h6>
                                <ul class="list-unstyled" id="license-details">
                                    <li><strong>Issue Date:</strong> <span id="license-issue-date">-</span></li>
                                    <li><strong>Years Licensed:</strong> <span id="license-years">-</span></li>
                                    <li><strong>License Type:</strong> <span id="license-type">-</span></li>
                                    <li><strong>Representatives:</strong> <span id="license-reps">-</span></li>
                                    <li><strong>Key Individuals:</strong> <span id="license-kis">-</span></li>
                                    <li><strong>Compliance Officer:</strong> <span id="license-compliance-officer">-</span></li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>Insurance Status</h6>
                                <div class="mb-3" id="pi-insurance">
                                    <strong>Professional Indemnity:</strong>
                                    <span class="badge bg-secondary ms-2" id="pi-status">No data</span>
                                    <ul class="list-unstyled ms-3 mt-2" id="pi-details">
                                        <li><small class="text-muted">Insurance information not available</small></li>
                                    </ul>
                                </div>
                                <div id="fg-insurance">
                                    <strong>Fidelity Guarantee:</strong>
                                    <span class="badge bg-secondary ms-2" id="fg-status">No data</span>
                                    <ul class="list-unstyled ms-3 mt-2" id="fg-details">
                                        <li><small class="text-muted">Insurance information not available</small></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-sm btn-outline-primary me-2">View Full License Details</button>
                            <button class="btn btn-sm btn-outline-primary me-2">Download License Certificate</button>
                            <button class="btn btn-sm btn-outline-primary">Renewal Reminders</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. OVERALL COMPLIANCE HEALTH SCORE (Hero Section) -->
    <div class="container-fluid mb-4">
        <div class="card health-score-card">
            <div class="card-body text-center py-5">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <div class="health-score-display">
                            <canvas id="healthScoreChart" width="300" height="300"></canvas>
                            <div class="health-score-overlay">
                                <div class="health-score-value" id="healthScoreValue">-</div>
                                <div class="health-score-label">OVERALL COMPLIANCE</div>
                                <div class="health-score-status text-success">Good Standing</div>
                            </div>
                        </div>
                        <div class="health-score-trend mt-3" id="health-score-trend">
                            <span class="badge bg-secondary">
                                <i class="fas fa-info-circle"></i> Real-time data
                            </span>
                            <span class="ms-2" id="health-trend-text">Loading...</span>
                            <a href="#" class="ms-2" onclick="showTrendChart()">View 12-month trend</a>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <h6 class="mb-3">Score Breakdown</h6>
                        <div class="mini-gauges">
                        <div class="mini-gauge mb-3">
                            <div class="d-flex justify-content-between">
                                <span><i class="fas fa-graduation-cap me-2"></i>Fit & Proper</span>
                                <span class="badge" id="fpBadge" data-area="fit-proper">-</span>
                            </div>
                            <small class="text-muted" id="fpDetails">Loading...</small>
                        </div>
                        <div class="mini-gauge mb-3">
                            <div class="d-flex justify-content-between">
                                <span><i class="fas fa-book me-2"></i>CPD</span>
                                <span class="badge" id="cpdBadge" data-area="cpd">-</span>
                            </div>
                            <small class="text-muted" id="cpdDetails">Loading...</small>
                        </div>
                        <div class="mini-gauge mb-3">
                            <div class="d-flex justify-content-between">
                                <span><i class="fas fa-shield-check me-2"></i>FICA</span>
                                <span class="badge" id="ficaBadge" data-area="fica">-</span>
                            </div>
                            <small class="text-muted" id="ficaDetails">Loading...</small>
                        </div>
                            <div class="mini-gauge mb-3">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-folder me-2"></i>Documents</span>
                                    <span class="badge bg-secondary" id="docsBadge">-</span>
                                </div>
                                <small class="text-muted" id="docsDetails">Loading...</small>
                            </div>
                            <div class="mini-gauge mb-3">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-shield-alt me-2"></i>Insurance</span>
                                    <span class="badge bg-secondary" id="insuranceBadge">-</span>
                                </div>
                                <small class="text-muted" id="insuranceDetails">Loading...</small>
                            </div>
                            <div class="mini-gauge">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-hand-paper me-2"></i>TCF</span>
                                    <span class="badge bg-secondary" id="tcfBadge">-</span>
                                </div>
                                <small class="text-muted" id="tcfDetails">Loading...</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col-md-12">
                        <div class="audit-info">
                            <small class="text-muted" id="audit-info">
                                <span id="last-audit">Loading audit information...</span>
                            </small>
                            <div class="mt-2">
                                <button class="btn btn-sm btn-outline-primary me-2" onclick="navigateToModule('internal-audits')">Schedule Audit</button>
                                <button class="btn btn-sm btn-outline-primary me-2" onclick="runQuickCheck()">Run Quick Check</button>
                                <button class="btn btn-sm btn-outline-primary" onclick="navigateToModule('internal-audits')">View Audit History</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 3. CRITICAL ALERTS & ACTION ITEMS -->
    <div class="container-fluid mb-4">
        <div class="alert-section">
            <h5 class="mb-3"><i class="fas fa-exclamation-triangle text-danger me-2"></i>REQUIRES IMMEDIATE ATTENTION</h5>
            <div class="row g-3" id="criticalAlertsContainer">
                <!-- Alerts will be populated by JavaScript -->
                <div class="col-12 text-center">
                    <div class="spinner-border spinner-border-sm me-2" role="status"></div>
                    Loading alerts...
                </div>
            </div>
            <div class="mt-3">
                <button class="btn btn-sm btn-outline-primary me-2" onclick="viewAllAlerts()" id="viewAllAlertsBtn">View All Alerts</button>
                <button class="btn btn-sm btn-outline-secondary me-2" onclick="createCustomAlert()">Create Custom Alert</button>
                <button class="btn btn-sm btn-outline-secondary" onclick="generateAlertReport()">Generate Alert Report</button>
            </div>
        </div>
    </div>

    <!-- 4. TEAM COMPLIANCE OVERVIEW -->
    <div class="container-fluid mb-4">
        <h4 class="mb-3">Team Performance & Compliance Status</h4>
        <div class="row mb-4">
            <div class="col-md-3 mb-3">
                    <div class="stat-card">
                    <div class="stat-value text-primary" data-stat="active-reps">12</div>
                    <div class="stat-label">Active Representatives</div>
                    <div class="stat-breakdown" id="teamComplianceBreakdown">
                        <span class="text-success">âœ“ Compliant: <span data-stat="compliant-reps">-</span> (<span data-stat="compliant-pct">-</span>)</span><br>
                        <span class="text-danger">âœ— Non-Compliant: <span data-stat="non-compliant-reps">1</span> (<span data-stat="non-compliant-pct">8%</span>)</span>
                    </div>
                    <div class="mt-2">
                        <small class="text-muted" id="teamTrend"><i class="fas fa-info-circle"></i> Real-time data</small>
                    </div>
                    <button class="btn btn-sm btn-outline-primary mt-2" onclick="viewFullTeamMatrix()">View Team Matrix</button>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="stat-card">
                    <div class="stat-value text-success" data-stat="avg-score">-</div>
                    <div class="stat-label">Average Compliance Score</div>
                    <div class="stat-breakdown" id="scoreBreakdown">
                        <small id="scoreDetails">Loading...</small>
                    </div>
                    <div class="mt-2">
                        <small class="text-muted" id="scoreTrend"><i class="fas fa-info-circle"></i> Real-time data</small>
                    </div>
                    <button class="btn btn-sm btn-outline-primary mt-2" onclick="viewFullTeamMatrix()">View Rankings</button>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="stat-card">
                    <div class="stat-value text-warning" data-stat="at-risk-reps">3</div>
                    <div class="stat-label">At Risk Representatives</div>
                    <div class="stat-breakdown" id="atRiskBreakdown">
                        <small id="atRiskDetails">Loading...</small>
                    </div>
                    <button class="btn btn-sm btn-warning mt-2" onclick="sendReminders()">Send Reminders</button>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                    <div class="stat-card">
                    <div class="stat-value text-success" id="achievements-count">-</div>
                    <div class="stat-label">Recent Achievements</div>
                    <div class="stat-breakdown" id="achievements-list">
                        <small class="text-muted">Loading achievements...</small>
                    </div>
                    <button class="btn btn-sm btn-outline-primary mt-2" onclick="navigateToModule('team-compliance')">View All</button>
                </div>
            </div>
        </div>

        <!-- Team Compliance Matrix -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Team Compliance Matrix</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Rep Name</th>
                                <th>F&P</th>
                                <th>CPD</th>
                                <th>FICA</th>
                                <th>Docs</th>
                                <th>Overall</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="teamComplianceMatrixBody">
                            <!-- Data will be populated by JavaScript -->
                            <tr>
                                <td colspan="7" class="text-center">
                                    <div class="spinner-border spinner-border-sm me-2" role="status"></div>
                                    Loading team compliance data...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-3">
                    <button class="btn btn-sm btn-outline-primary me-2" onclick="viewFullTeamMatrix()">View Full Team Matrix</button>
                    <button class="btn btn-sm btn-outline-secondary me-2" onclick="exportTeamMatrix()">Export to Excel</button>
                    <button class="btn btn-sm btn-outline-secondary" onclick="generateTeamReport()">Generate Team Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 5. COMPLIANCE BY AREA (Six Cards) -->
    <div class="container-fluid mb-4">
        <h4 class="mb-3">Compliance by Area</h4>
        <div class="row g-3">
            <!-- Card 1: Fit & Proper -->
            <div class="col-md-4">
                <div class="compliance-area-card">
                    <div class="card-header-area">
                        <i class="fas fa-graduation-cap fa-2x me-2"></i>
                        <div>
                            <h6 class="mb-0">Fit & Proper</h6>
                            <span class="badge" id="fpAreaBadge">Loading...</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="h4 mb-2" id="fpAreaCount">- / - Representatives</div>
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar" id="fpAreaProgress" style="width: 0%"></div>
                        </div>
                        <ul class="list-unstyled small" id="fpAreaDetails">
                            <li>Loading...</li>
                        </ul>
                        <div id="fpAreaAlerts"></div>
                        <button class="btn btn-sm btn-outline-primary w-100" onclick="navigateToModule('fit-proper')">View All Representatives</button>
                    </div>
                </div>
            </div>

            <!-- Card 2: CPD Management -->
            <div class="col-md-4">
                <div class="compliance-area-card">
                    <div class="card-header-area">
                        <i class="fas fa-book fa-2x me-2"></i>
                        <div>
                            <h6 class="mb-0">CPD Compliance</h6>
                            <span class="badge" id="cpdAreaBadge">Loading...</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="h4 mb-2" id="cpdAreaCount">- / - Representatives</div>
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar" id="cpdAreaProgress" style="width: 0%"></div>
                        </div>
                        <ul class="list-unstyled small" id="cpdAreaDetails">
                            <li>Loading...</li>
                        </ul>
                        <div class="mt-2">
                            <small class="text-muted" id="cpdAreaSummary">Loading...</small>
                        </div>
                        <button class="btn btn-sm btn-outline-primary w-100 mt-2" onclick="navigateToModule('cpd')">View CPD Dashboard</button>
                    </div>
                </div>
            </div>

            <!-- Card 3: FICA Compliance -->
            <div class="col-md-4">
                <div class="compliance-area-card">
                    <div class="card-header-area">
                        <i class="fas fa-shield-check fa-2x me-2"></i>
                        <div>
                            <h6 class="mb-0">FICA Verification</h6>
                            <span class="badge" id="ficaAreaBadge">Loading...</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="h4 mb-2" id="ficaAreaCount">- / - Clients</div>
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar" id="ficaAreaProgress" style="width: 0%"></div>
                        </div>
                        <ul class="list-unstyled small" id="ficaAreaDetails">
                            <li>Loading...</li>
                        </ul>
                        <button class="btn btn-sm btn-outline-primary w-100 mt-2" onclick="navigateToModule('clients-fica')">View FICA Dashboard</button>
                    </div>
                </div>
            </div>

            <!-- Card 4: Document Management -->
            <div class="col-md-4">
                <div class="compliance-area-card">
                    <div class="card-header-area">
                        <i class="fas fa-folder fa-2x me-2"></i>
                        <div>
                            <h6 class="mb-0">Document Compliance</h6>
                            <span class="badge bg-success">95% Compliant</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="h4 mb-2" id="docsAreaCount">- / - Documents</div>
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar bg-secondary" id="docsAreaProgress" style="width: 0%"></div>
                        </div>
                        <ul class="list-unstyled small" id="docsAreaDetails">
                            <li class="text-muted">Document data not available</li>
                        </ul>
                        <button class="btn btn-sm btn-outline-primary w-100 mt-2">View Document Library</button>
                    </div>
                </div>
            </div>

            <!-- Card 5: Insurance Coverage -->
            <div class="col-md-4">
                <div class="compliance-area-card">
                    <div class="card-header-area">
                        <i class="fas fa-shield-alt fa-2x me-2"></i>
                        <div>
                            <h6 class="mb-0">Insurance Policies</h6>
                            <span class="badge bg-success">100% Compliant</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="h4 mb-2" id="insuranceAreaStatus">Loading...</div>
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar bg-secondary" id="insuranceAreaProgress" style="width: 0%"></div>
                        </div>
                        <ul class="list-unstyled small" id="insuranceAreaDetails">
                            <li class="text-muted">Insurance data not available</li>
                        </ul>
                        <button class="btn btn-sm btn-outline-primary w-100 mt-2">View Policies</button>
                    </div>
                </div>
            </div>

            <!-- Card 6: Supervision & Oversight -->
            <div class="col-md-4">
                <div class="compliance-area-card">
                    <div class="card-header-area">
                        <i class="fas fa-users fa-2x me-2"></i>
                        <div>
                            <h6 class="mb-0">Representative Supervision</h6>
                            <span class="badge bg-success">100% Compliant</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="h4 mb-2" id="supervisionAreaStatus">Loading...</div>
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar bg-secondary" id="supervisionAreaProgress" style="width: 0%"></div>
                        </div>
                        <ul class="list-unstyled small" id="supervisionAreaDetails">
                            <li class="text-muted">Supervision data not available</li>
                        </ul>
                        <button class="btn btn-sm btn-outline-primary w-100 mt-2">View Hierarchy</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 6. CPD PROGRESS WIDGET -->
    <div class="container-fluid mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">CPD Progress Tracker</h5>
                <small class="text-muted">Annual cycle: 1 June 2024 - 31 May 2025</small>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 text-center">
                        <div class="h2 text-primary" id="cpdDaysRemaining">-</div>
                        <div class="text-muted">DAYS REMAINING</div>
                        <div class="progress mt-2" style="height: 10px;">
                            <div class="progress-bar bg-primary" id="cpdYearProgress" style="width: 0%"></div>
                        </div>
                        <small class="text-muted" id="cpdYearElapsed">Loading...</small>
                    </div>
                    <div class="col-md-6">
                        <canvas id="cpdProgressChart" height="150"></canvas>
                    </div>
                    <div class="col-md-3">
                        <h6>Top Performers</h6>
                        <ol class="small" id="cpdTopPerformers">
                            <li>Loading...</li>
                        </ol>
                        <h6 class="mt-3">Need Attention</h6>
                        <ul class="small text-danger" id="cpdNeedAttention">
                            <li>Loading...</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-3">
                    <button class="btn btn-sm btn-outline-primary me-2">View CPD Dashboard</button>
                    <button class="btn btn-sm btn-outline-secondary me-2">Send Reminders</button>
                    <button class="btn btn-sm btn-outline-secondary">Progress Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 7. FICA STATUS WIDGET -->
    <div class="container-fluid mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">FICA Review Status</h5>
                <small class="text-muted">Client verification compliance</small>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="text-center mb-3">
                            <div class="h3 text-success" id="ficaCompliantPct" data-widget="fica">-</div>
                            <div class="text-muted">Compliant</div>
                            <div class="small" id="ficaCompliantCount">- / - clients current</div>
                        </div>
                    </div>
                    <div class="col-md-8" id="ficaRiskBreakdown">
                        <div class="text-center text-muted py-3">
                            <div class="spinner-border spinner-border-sm me-2" role="status"></div>
                            Loading FICA breakdown...
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <button class="btn btn-sm btn-outline-primary me-2">View FICA Dashboard</button>
                    <button class="btn btn-sm btn-outline-warning me-2">Overdue List (45)</button>
                    <button class="btn btn-sm btn-outline-secondary">FICA Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 8. RECENT ACTIVITY TIMELINE -->
    <div class="container-fluid mb-4">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Recent Activity & System Events</h5>
                    <div class="btn-group btn-group-sm" role="group">
                        <button type="button" class="btn btn-outline-primary active">All</button>
                        <button type="button" class="btn btn-outline-primary">Critical</button>
                        <button type="button" class="btn btn-outline-primary">My Activity</button>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="activity-timeline" id="activityTimeline">
                    <div class="text-center text-muted py-3">
                        <div class="spinner-border spinner-border-sm me-2" role="status"></div>
                        Loading recent activity...
                    </div>
                </div>
                <button class="btn btn-sm btn-outline-primary mt-3">Show More Activity</button>
            </div>
        </div>
    </div>

    <!-- 9. UPCOMING DEADLINES CALENDAR -->
    <div class="container-fluid mb-4">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="fas fa-calendar me-2"></i>Upcoming Deadlines & Important Dates</h5>
                    <div class="btn-group btn-group-sm" role="group">
                        <button type="button" class="btn btn-outline-primary active">List View</button>
                        <button type="button" class="btn btn-outline-primary">Calendar</button>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="deadline-list" id="deadlineList">
                    <div class="text-center text-muted py-3">
                        <div class="spinner-border spinner-border-sm me-2" role="status"></div>
                        Loading deadlines...
                    </div>
                </div>
                <button class="btn btn-sm btn-outline-primary mt-3" onclick="viewAllDeadlines()" id="viewAllDeadlinesBtn">Show All Deadlines</button>
            </div>
        </div>
    </div>

    <!-- 10. QUICK ACTIONS PANEL -->
    <div class="container-fluid mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-bolt me-2"></i>Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <h6>Compliance</h6>
                        <ul class="list-unstyled">
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">+ Create Alert</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ“‹ Schedule Audit</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">âœ“ Run Quick Check</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ“Š Generate Report</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h6>Team Management</h6>
                        <ul class="list-unstyled">
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">+ Add Representative</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ“§ Send Team Reminder</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ‘¥ View Team Matrix</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ“ˆ Team Performance</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h6>Documents & CPD</h6>
                        <ul class="list-unstyled">
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ“¤ Upload Document</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">+ Add CPD Record</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">âœ“ Verify Certificate</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ“‹ Expiring Docs (45)</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h6>FICA & Reports</h6>
                        <ul class="list-unstyled">
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">+ Add Client</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ“… Schedule FICA Review</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ“„ Executive Summary</a></li>
                            <li><a href="#" class="btn btn-sm btn-link p-0 text-start">ðŸ“§ Email to Board</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 11. KEY STATISTICS (Bottom Section) -->
    <div class="container-fluid mb-4">
        <h4 class="mb-3">Key Statistics</h4>
        <div class="row g-3">
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" data-stat="active-reps-count">-</div>
                    <div class="stat-label">Active Representatives</div>
                    <small class="text-muted" id="repsTrend"><i class="fas fa-info-circle"></i> Real-time data</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" data-stat="avg-score">-</div>
                    <div class="stat-label">Average Compliance Score</div>
                    <small class="text-muted" id="scoreTrendStat"><i class="fas fa-info-circle"></i> Real-time data</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="totalClientsStat">-</div>
                    <div class="stat-label">Active Clients</div>
                    <small class="text-muted" id="clientsTrend"><i class="fas fa-info-circle"></i> Real-time data</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="ficaCompliantStat">-</div>
                    <div class="stat-label">FICA Compliant</div>
                    <small class="text-muted" id="ficaTrend"><i class="fas fa-info-circle"></i> Real-time data</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="totalDocumentsStat">-</div>
                    <div class="stat-label">Total Documents</div>
                    <small class="text-muted" id="docsTrend"><i class="fas fa-info-circle"></i> Real-time data</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="documentsCurrentStat">-</div>
                    <div class="stat-label">Documents Current</div>
                    <small class="text-muted" id="docsCurrentTrend"><i class="fas fa-info-circle"></i> Real-time data</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="complianceChecksStat">-</div>
                    <div class="stat-label">Compliance Checks (30 days)</div>
                    <small class="text-muted" id="checksTrend"><i class="fas fa-info-circle"></i> Real-time data</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="auditsCompletedStat">-</div>
                    <div class="stat-label">Audits Completed (this quarter)</div>
                    <small class="text-muted" id="auditsTrend"><i class="fas fa-info-circle"></i> Real-time data</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://prium.github.io/phoenix/v1.23.0/assets/js/phoenix.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Data Functions - Must be loaded before dashboard scripts -->
    <script src="../../../js/data-functions.js"></script>
    <script src="../js/dashboard-main.js"></script>
    <script src="../js/health-score.js"></script>
    <script src="../js/charts.js"></script>
    <script src="../js/auto-refresh.js"></script>
    <script src="../js/export.js"></script>
</body>
</html>

