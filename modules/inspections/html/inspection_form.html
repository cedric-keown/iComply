<div class="inspection-form-wrapper">
    <div class="card mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="mb-1" id="formTitle">Pre Trip Inspection</h1>
                    <p class="text-muted mb-0">Complete the inspection form below</p>
                </div>
                <div class="d-flex gap-2">
                    <button type="button" class="btn btn-outline-info" id="prepopulateBtn" title="Prepopulate form with test data" style="display: none;">
                        <i class="fas fa-flask me-2"></i>Test Data
                    </button>
                    <button type="button" class="btn btn-outline-secondary" id="cancelBtn">
                        <i class="fas fa-times me-2"></i>Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <form id="inspectionForm">
        <div class="card mb-3">
            <div class="card-header bg-light">
                <h6 class="mb-0">Inspection Information</h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <!-- Driver 1 Fields - Stacked vertically -->
                    <div class="col-md-6">
                        <label class="form-label">1) Driver Name</label>
                        <select class="form-select" id="inspectionDriverName" required>
                            <option value="">Select Driver</option>
                        </select>
                    </div>
                    
                    <!-- Driver 2 Fields - Stacked vertically below Driver 1 -->
                    <div class="col-md-6">
                        <label class="form-label">2) Driver Name</label>
                        <select class="form-select" id="inspectionDriverName2">
                            <option value="">Select Driver (Optional)</option>
                        </select>
                    </div>
                    
                    <div class="col-md-6">
                        <label class="form-label">Fleet Number</label>
                        <select class="form-select" id="inspectionFleetNumber" required>
                            <option value="">Select Fleet Number</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-control" id="inspectionDate" required>
                    </div>
                </div>
            </div>
        </div>

        <!-- Legend -->
        <div class="alert alert-info mb-3">
            <strong>Marking System:</strong> [S] Safe for use | [U] Not Safe for Use | [N/A] Not Applicable
            <br><strong>Vehicle Types:</strong> COACHES / LIGHT VEHICLES / QUANTUMS
        </div>

        <!-- Category A Section -->
        <div class="card mb-3 border-danger">
            <div class="card-header bg-danger text-white">
                <h6 class="mb-0">
                    <strong>CATEGORY "A" ITEMS</strong> - VEHICLE MAY NOT BE USED IF ANY ITEMS DEFECTIVE - INFORM SUPERVISOR IMMEDIATELY
                </h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 border-end border-danger">
                        <h6 class="text-danger mb-3">Left Column</h6>
                        <div id="categoryALeftItems"></div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-danger mb-3">Right Column</h6>
                        <div id="categoryARightItems"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category B Section -->
        <div class="card mb-3 border-warning">
            <div class="card-header bg-warning">
                <h6 class="mb-0">
                    <strong>CATEGORY "B" ITEMS</strong> - VEHICLE MAY ONLY BE USED TO DRIVE TO WORKSHOP FOR REPAIR - INFORM VEHICLE MAINTENANCE IMMEDIATELY
                </h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 border-end border-warning">
                        <h6 class="text-warning mb-3">Left Column</h6>
                        <div id="categoryBLeftItems"></div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-warning mb-3">Right Column</h6>
                        <div id="categoryBRightItems"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category C Section -->
        <div class="card mb-3 border-success">
            <div class="card-header bg-success text-white">
                <h6 class="mb-0">
                    <strong>CATEGORY "C" ITEMS</strong> - ANY DEFECT THAT IS NOT MENTIONED ABOVE
                </h6>
            </div>
            <div class="card-body">
                <div id="categoryCItems"></div>
            </div>
        </div>

        <!-- Sign-off Section -->
        <div class="card mb-3">
            <div class="card-header bg-light">
                <h6 class="mb-0">Sign-off</h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <!-- Driver Information Row -->
                    <div class="col-md-4">
                        <label class="form-label">Driver Name</label>
                        <input type="text" class="form-control" id="driverSignatureName">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Trip Start Time</label>
                        <input type="time" class="form-control" id="tripStartTime">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Trip End Time</label>
                        <input type="time" class="form-control" id="tripEndTime">
                    </div>
                    
                    <!-- Driver Signature Row -->
                    <div class="col-md-12">
                        <label class="form-label">Driver Signature</label>
                        <div class="signature-pad-wrapper border rounded p-2 bg-light" style="position: relative;">
                            <canvas id="driverSignaturePad" style="width: 100%; height: 120px; cursor: crosshair; touch-action: none;"></canvas>
                            <button type="button" class="btn btn-sm btn-outline-secondary mt-2" id="clearDriverSignature">
                                <i class="fas fa-eraser me-1"></i>Clear
                            </button>
                        </div>
                        <input type="hidden" id="driverSignature" name="driverSignature">
                    </div>
                    
                    <!-- Supervisor Information Row -->
                    <div class="col-md-6">
                        <label class="form-label">Supervisor (daily)</label>
                        <input type="text" class="form-control" id="supervisorName">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Supervisor Date</label>
                        <input type="date" class="form-control" id="supervisorDate">
                    </div>
                    
                    <!-- Supervisor Signature Row -->
                    <div class="col-md-12">
                        <label class="form-label">Supervisor Signature</label>
                        <div class="signature-pad-wrapper border rounded p-2 bg-light" style="position: relative;">
                            <canvas id="supervisorSignaturePad" style="width: 100%; height: 120px; cursor: crosshair; touch-action: none;"></canvas>
                            <button type="button" class="btn btn-sm btn-outline-secondary mt-2" id="clearSupervisorSignature">
                                <i class="fas fa-eraser me-1"></i>Clear
                            </button>
                        </div>
                        <input type="hidden" id="supervisorSignature" name="supervisorSignature">
                    </div>
                </div>
                <div class="mt-2">
                    <small class="text-muted">
                        <strong>Note:</strong> Checklist to be returned to the Control Room / Key Controller Daily (After each trip)
                    </small>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <div class="d-flex justify-content-end gap-2">
                    <button type="button" class="btn btn-outline-secondary" id="cancelFormBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="saveInspectionBtn">Save Inspection</button>
                </div>
            </div>
        </div>
    </form>
</div>

